# æœç´¢æ¢å¯»ä¸é—®é¢˜æ±‚è§£

## æœç´¢åŸºæœ¬æ¦‚å¿µ

### æœç´¢çš„å½¢å¼åŒ–æè¿°

!!! note "çŠ¶æ€ï¼ˆstateï¼‰"
    å¹¿ä¹‰æ¥è¯´çŠ¶æ€æ˜¯å¯¹æœç´¢ç®—æ³•å’Œæœç´¢ç¯å¢ƒå½“å‰æ‰€å¤„æƒ…å½¢çš„æè¿°ä¿¡æ¯ã€‚æœç´¢ç®—æ³•åˆšå¼€å§‹æ‰€åœ¨çŠ¶æ€è¢«ç§°ä¸ºåˆå§‹çŠ¶æ€ï¼Œå®Œæˆä»»åŠ¡æ—¶æ‰€åœ¨çŠ¶æ€è¢«ç§°ä¸ºç»ˆæ­¢çŠ¶æ€ã€‚

!!! note "åŠ¨ä½œï¼ˆ actionï¼‰"
    å¹¿ä¹‰æ¥è¯´çŠ¶æ€æ˜¯å¯¹æœç´¢ç®—æ³•å’Œæœç´¢ç¯å¢ƒå½“å‰æ‰€å¤„æƒ…å½¢çš„æè¿°ä¿¡æ¯ã€‚ä¸ºäº†å®Œæˆæœ€çŸ­è·¯å¾„çš„æ¢ç´¢ï¼Œç®—æ³•éœ€è¦ä¸æ–­ä»ä¸€ä¸ªçŠ¶æ€è½¬ç§»åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚ç®—æ³•ä»ä¸€ä¸ªçŠ¶æ€è½¬ç§»åˆ°å¦å¤–ä¸€ä¸ªçŠ¶æ€æ‰€é‡‡å–çš„è¡Œä¸ºè¢«ç§°ä¸ºåŠ¨ä½œã€‚

!!! note "çŠ¶æ€è½¬ç§»ï¼ˆstate transitionï¼‰"
    ç®—æ³•é€‰æ‹©äº†ä¸€ä¸ªåŠ¨ä½œä¹‹åï¼Œå…¶æ‰€å¤„çŠ¶æ€ä¹Ÿä¼šå‘ç”Ÿç›¸åº”å˜åŒ–ï¼Œè¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºçŠ¶æ€è½¬ç§»ã€‚

!!! note "è·¯å¾„ï¼ˆpathï¼‰å’Œä»£ä»·ï¼ˆcostï¼‰"
    ä»¥ä»»ä½•ä¸€ä¸ªçŠ¶æ€ä¸ºèµ·ç‚¹ï¼Œæœç´¢ç®—æ³•é€šè¿‡æ‰§è¡Œä¸€ç³»åˆ—åŠ¨ä½œåï¼Œå°†ä¼šåœ¨ä¸åŒçŠ¶æ€ä¹‹é—´ä¸æ–­è½¬ç§»ã€‚å°†è¿™ä¸ªè¿‡ç¨‹ä¸­ç»å†çš„çŠ¶æ€è®°å½•ä¸‹æ¥ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªçŠ¶æ€åºåˆ—ï¼Œè¿™ä¸ªçŠ¶æ€åºåˆ—è¢«ç§°ä¸ºä¸€æ¡è·¯å¾„ã€‚æ¯æ¡è·¯å¾„å¯¹åº”ä¸€ä¸ªä»£ä»·ã€‚å¦‚æœä¸€æ¡è·¯å¾„å¯¹åº”çš„çŠ¶æ€åºåˆ—é•¿åº¦ä¸º2ï¼Œé‚£ä¹ˆè¿™æ¡è·¯å¾„çš„ä»£ä»·ä¹Ÿè¢«ç§°ä¸ºå•æ­¥ä»£ä»·ã€‚ä¸€èˆ¬å‡å®šå•æ­¥ä»£ä»·å–å€¼ä¸ºéè´Ÿã€‚

!!! note "ç›®æ ‡æµ‹è¯•ï¼ˆgoal testï¼‰"
    ç›®æ ‡æµ‹è¯•å‡½æ•°goal_test(ğ‘ )ç”¨äºåˆ¤æ–­çŠ¶æ€ğ‘ æ˜¯å¦ä¸ºç›®æ ‡çŠ¶æ€ã€‚ç›®æ ‡æµ‹è¯•é€šè¿‡æ„å‘³ç€æœç´¢ç®—æ³•å®Œæˆï¼Œä½†æ˜¯æœç´¢ç®—æ³•å®Œæˆå¹¶ä¸æ„å‘³ç€ç®—æ³•å·²ç»æ‰¾åˆ°äº†æœ€çŸ­è·¯å¾„ã€‚åœ¨æœ€çŸ­è·¯å¾„æœç´¢ä¸­ï¼Œæœç´¢ç®—æ³•ä¼šä¸æ–­ä»å½“å‰ç»“ç‚¹çš„é‚»æ¥èŠ‚ç‚¹ä¸­é€‰æ‹©ä¸‹ä¸€ä¸ªç»“ç‚¹ï¼Œå¦‚æ­¤å¾ªç¯ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€æ¡ä»åˆå§‹çŠ¶æ€åˆ°ç»ˆæ­¢çŠ¶æ€çš„è·¯å¾„ä¸ºæ­¢ã€‚å½“ç„¶ï¼Œå¯»æ‰¾æ‰€å¾—çš„è·¯å¾„ï¼ˆä»åˆå§‹çŠ¶æ€åˆ°ç»ˆæ­¢çŠ¶æ€ï¼‰æ˜¯å¦æ»¡è¶³â€œè·¯å¾„æœ€çŸ­â€è¿™ä¸€çº¦æŸæ¡ä»¶ï¼Œè¿˜éœ€è¦å¦è¡Œåˆ¤æ–­ã€‚

!!! note "æœç´¢è¿‡ç¨‹å¯è§†ä¸ºæœç´¢æ ‘çš„æ„å»º"

    å¯ä»¥ç”¨ä¸€æ£µæ ‘æ¥è®°å½•ç®—æ³•æ‰€æ¢ç´¢çš„è·¯å¾„ï¼Œè¿™æ ·ä¸€æ£µæ ‘è¢«ç§°ä¸ºæœç´¢æ ‘ï¼Œæ ‘ä¸­æ¯ä¸ªç»“ç‚¹ç”¨ä¸€ä¸ªçŠ¶æ€æ ‡è®°ã€‚æœç´¢æ ‘è®°å½•äº†ä»æ ¹ç»“ç‚¹å‡ºå‘ç›®å‰æ‰€æœ‰æ¢ç´¢è¿‡çš„è·¯å¾„ã€‚æœç´¢ç®—æ³•å¯ä»¥è¢«çœ‹æˆæ˜¯ä¸€ä¸ªæ„å»ºæœç´¢æ ‘çš„è¿‡ç¨‹ï¼Œä»æ ¹ç»“ç‚¹ï¼ˆåˆå§‹çŠ¶æ€ï¼‰å¼€å§‹ï¼Œä¸æ–­å±•å¼€æ¯ä¸ªç»“ç‚¹çš„åç»§ç»“ç‚¹ï¼Œç›´åˆ°æŸä¸ªç»“ç‚¹é€šè¿‡äº†ç›®æ ‡æµ‹è¯•ã€‚

### æœç´¢ç®—æ³•çš„è¯„æµ‹æ ‡å‡†

- è¯„ä»·æŒ‡æ ‡
    - å®Œå¤‡æ€§ï¼šèƒ½å¦æ‰¾åˆ°è§£ï¼ˆä¸ä¸€å®šæœ€ä¼˜ï¼‰
    - æœ€ä¼˜æ€§ï¼šèƒ½å¦ä¿è¯æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªè§£æ˜¯æœ€ä¼˜è§£
    - æ—¶é—´å¤æ‚åº¦ï¼ˆé€šè¿‡æ‰©å±•çš„ç»“ç‚¹æ•°é‡è¡¡é‡ï¼‰
    - ç©ºé—´å¤æ‚åº¦ï¼ˆé€šè¿‡åŒæ—¶è®°å½•çš„ç»“ç‚¹æ•°é‡è¡¡é‡ï¼‰

!!! note ""
    ![Alt text](images/image-20.png)

### æœç´¢æ¡†æ¶

```text
F <- {æ ¹èŠ‚ç‚¹}
while F != âˆ… do
    n <- pick_from(F)
    F <- F - {n}
    if goal_test(n) then
        return n.path
    end
    F <- F âˆª successor_nodes(n)
end
```

- pick_from å†³å®šæ‰©å±•ç»“ç‚¹çš„é¡ºåºï¼Œsuccessor_nodes å†³å®šå“ªäº›èŠ‚ç‚¹å¯è¢«æ”¾å…¥è¾¹ç¼˜é›†åˆï¼ˆfringe setï¼Œä¹Ÿå«å¼€è¡¨ï¼Œopen listï¼‰ä»¥åœ¨åé¢æ‰©å±•ï¼ˆexpandï¼‰
- æ¯æ¬¡ä»è¾¹ç¼˜é›†åˆä¸­å–å‡ºæœ€ä¸Šå±‚ï¼ˆæœ€æµ…ï¼‰çš„ç»“ç‚¹æ—¶æ˜¯å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆbreadth first searchï¼ŒBFSï¼‰
- æ¯æ¬¡ä»è¾¹ç¼˜é›†åˆä¸­å–å‡ºæœ€ä¸‹å±‚ï¼ˆæœ€æ·±ï¼‰çš„ç»“ç‚¹æ—¶æ˜¯æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆdepth first searchï¼ŒDFSï¼‰
- æ”¾å¼ƒæ‰©å±•éƒ¨åˆ†ç»“ç‚¹çš„åšæ³•ç§°ä¸ºå‰ªæï¼ˆpruningï¼‰

## è´ªå©ªæœ€ä½³ä¼˜å…ˆæœç´¢

- åˆ©ç”¨ä¸€äº›èƒ½å¤Ÿè¾…åŠ©ç®—æ³•åšå‡ºå†³ç­–çš„é¢å¤–ä¿¡æ¯çš„æœç´¢ç®—æ³•ç§°ä¸ºå¯å‘å¼æœç´¢ï¼ˆheuristic searchï¼‰ï¼Œæˆ–æœ‰ä¿¡æ¯æœç´¢ï¼ˆinformed searchï¼‰
- æä¾›çš„è¿™äº›è¾…åŠ©ä¿¡æ¯ç§°ä¸ºå¯å‘ä¿¡æ¯
- å¯å‘ä¿¡æ¯é€šå¸¸å½¢å¼åŒ–ä¸ºä¸€ä¸ªå…³äºç»“ç‚¹çš„å‡½æ•° $h(n)$ï¼Œå…¶ç”¨äºä¼°è®¡ç»“ç‚¹ $n$ è·ç¦»è¾¾åˆ°ç›®æ ‡è¿˜éœ€ä»˜å‡ºå¤šå°‘ä»£ä»·ï¼Œè¿™ä¸ªå‡½æ•°ç§°ä¸ºå¯å‘å‡½æ•°ï¼ˆheuristic functionï¼‰
    - å¯å‘å‡½æ•°é€šå¸¸æ˜¯éè´Ÿçš„
    - å¸¸è§ç”¨æ³•æ˜¯ç”¨æ¥æ›´æ”¹å‰é¢çš„ pick_from å‡½æ•°æ¥è§„å®šæŒ‘é€‰ç»“ç‚¹çš„é¡ºåº
- å¯¹äºä»»æ„ç»“ç‚¹ $n$ï¼Œå†³å®šäº†æœç´¢ç®—æ³•æ‰©å±•ç»“ç‚¹ $n$ çš„ä¼˜å…ˆåº¦çš„å‡½æ•° $f(n)$ ç§°ä¸ºè¯„ä»·å‡½æ•°ï¼ˆevaluation functionï¼‰
    - è¯„ä»·å‡½æ•°å€¼è¶Šå°ï¼Œè¢«æŒ‘é€‰çš„ä¼˜å…ˆçº§è¶Šé«˜
    - æ·±åº¦ä¼˜å…ˆæœç´¢ä¸­ $f(n)$ å¯è¢«å®šä¹‰ä¸ºè¯¥ç»“ç‚¹æ·±åº¦çš„å€’æ•°
    - å¹¿åº¦ä¼˜å…ˆæœç´¢ä¸­ $f(n)$ å¯è¢«å®šä¹‰ä¸ºè¯¥ç»“ç‚¹æ·±åº¦
- è´ªå©ªæœ€ä½³ä¼˜å…ˆæœç´¢
    - å³ greedy best-first searchï¼ŒGBFS
    - ä¼˜å…ˆæ‰©å±•è·ç¦»ç›®æ ‡è¿‘çš„ç»“ç‚¹ï¼Œå³ä»¤ $f(n) = h(n)$
    - ä¸æ’é™¤ç¯è·¯çš„è´ªå©ªæœ€ä½³ä¼˜å…ˆæœç´¢ç®—æ³•æ˜¯ä¸å®Œå¤‡çš„
    - æ’é™¤ç¯è·¯çš„è´ªå©ªæœ€ä½³ä¼˜å…ˆæœç´¢æ˜¯å®Œå¤‡çš„ï¼Œä½†ä¸ä¸€å®šæœ€ä¼˜
    - æœ€åæƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦å‡ä¸º $O(b^m)$
        - $b$ ä¸ºåˆ†æ”¯å› å­ï¼ˆæ¯ä¸ªç»“ç‚¹æœ€å¤§çš„åˆ†æ”¯æ•°ç›®ï¼‰
        - $m$ ä¸ºæœ€å¤§æ·±åº¦ï¼Œä¹Ÿå°±æ˜¯æœç´¢æ ‘ä¸­è·¯å¾„çš„æœ€å¤§å¯èƒ½é•¿åº¦

- æ™ºèƒ½ä½“ä¸å”¯ä¸€ï¼Œè§£å†³ä¿¡æ¯ç¡®å®šã€å…¨å±€å¯è§‚å¯Ÿã€è½®æµè¡ŒåŠ¨ã€è¾“èµ¢æ”¶ç›Šé›¶å’Œçš„åšå¼ˆé—®é¢˜ï¼Œæ±‚è§£è¿™æ ·é—®é¢˜çš„ç®—æ³•ç§°ä¸ºå¯¹æŠ—æœç´¢ï¼ˆadversarial searchï¼‰æˆ–åšå¼ˆæœç´¢ï¼ˆgame searchï¼‰
- æ™ºèƒ½ä½“ä¼šé€‰æ‹©æœ€å¤§åŒ–è‡ªèº«åˆ©ç›Šã€æœ€å°åŒ–å¯¹æ‰‹åˆ©ç›Šçš„ç­–ç•¥
- å½¢å¼åŒ–æè¿°ï¼š
    - çŠ¶æ€ï¼šçŠ¶æ€ $s$ åŒ…æ‹¬å½“å‰æ¸¸æˆå±€é¢å’Œå½“å‰è¡ŒåŠ¨çš„æ™ºèƒ½ä½“ï¼Œåˆå§‹çŠ¶æ€ $s_0$ ä¸ºæ¸¸æˆå¼€å§‹æ—¶çš„çŠ¶æ€ã€‚$\mathrm{player}(s)$ è¡¨ç¤ºçŠ¶æ€ $s$ ä¸‹è¡ŒåŠ¨çš„æ™ºèƒ½ä½“
    - åŠ¨ä½œï¼šåŠ¨ä½œæ˜¯æŒ‡ $\mathrm{player}(s)$ åœ¨å½“å‰å±€é¢ä¸‹å¯ä»¥é‡‡å–çš„æ“ä½œ $a$ï¼Œè®°åŠ¨ä½œé›†åˆä¸º $\mathrm{actions}(s)$
    - çŠ¶æ€è½¬ç§»ï¼šçŠ¶æ€è½¬ç§»å‡½æ•° $s' = \mathrm{result}(s, a)$ è¡¨ç¤ºåœ¨çŠ¶æ€ $s$ ä¸‹é‡‡å–åŠ¨ä½œ $a$ åçš„ä¸‹ä¸€ä¸ªçŠ¶æ€
    - ç»ˆå±€çŠ¶æ€æµ‹è¯•ï¼šç»ˆå±€çŠ¶æ€æµ‹è¯•å‡½æ•° $\mathrm{terminal\_test}(s)$ ç”¨äºæµ‹è¯•æ¸¸æˆæ˜¯å¦åœ¨çŠ¶æ€ $s$ ä¸‹ç»“æŸ
    - ç»ˆå±€å¾—åˆ†ï¼šç»ˆå±€å¾—åˆ†å‡½æ•° $\mathrm{utility}(s, p)$ è¡¨ç¤ºåœ¨çŠ¶æ€ $s$ ä¸‹ç©å®¶ $p$ çš„å¾—åˆ†
        - å¯¹äºäºŒäººé›¶å’Œåšå¼ˆï¼Œåªéœ€è¦è®°å½•å…¶ä¸­ä¸€äººçš„ç»ˆå±€å¾—åˆ†å³å¯

### æœ€å¤§æœ€å°æœç´¢

- æœ€å¤§æœ€å°æœç´¢ï¼ˆminimax searchï¼‰æ˜¯æ±‚è§£å¯¹æŠ—æœç´¢é—®é¢˜çš„åŸºæœ¬ç®—æ³•
- è¯¥ç®—æ³•å‡è®¾ä¸¤åç©å®¶åœ¨å†³ç­–æ—¶æ€»æ˜¯ç†æ€§åœ°å€¾å‘äºæœ€å¤§åŒ–è‡ªå·±çš„å¾—åˆ†ï¼ˆæœ€å°åŒ–å¯¹æ–¹å¾—åˆ†ï¼‰
- ç®—æ³•è¿‡ç¨‹
    - å‡è®¾ä»¥æœ€å¤§åŒ–å¾—åˆ†ä¸ºç›®æ ‡çš„ç©å®¶ä¸º MAXï¼Œä»¥æœ€å°åŒ–å¾—åˆ†ä¸ºç›®æ ‡çš„ç©å®¶ä¸º MIN
    - æŸä¸€å±‚ç”± MAX ç©å®¶è¡ŒåŠ¨ï¼Œåˆ™å…¶ä¼šé€‰æ‹©å¾—åˆ†æœ€å¤§çš„å­æ ‘è¿›è¡Œè¡ŒåŠ¨
    - æŸä¸€å±‚ç”± MIN ç©å®¶è¡ŒåŠ¨ï¼Œåˆ™å…¶ä¼šé€‰æ‹©å¾—åˆ†æœ€å°çš„å­æ ‘è¿›è¡Œè¡ŒåŠ¨
    - é€’å½’åœ°è¿›è¡Œä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ°è¾¾åˆ°ç»ˆå±€çŠ¶æ€
    - ï¼ˆå­æ ‘çš„å¾—åˆ†ç”±æ‰€æœ‰å®ƒçš„å­æ ‘çš„å¾—åˆ†å–æœ€å¤§æˆ–æœ€å°å¾—åˆ°ï¼‰

$$
\mathrm{minimax}(s) = \begin{cases}
\mathrm{utility}(s) & \text{if terminal\_test(}s\text{)} \\
\max_{a \in \mathrm{actions}(s)} \mathrm{minimax}(\mathrm{result}(s, a)) & \text{if player(}s\text{) = MAX} \\
\min_{a \in \mathrm{actions}(s)} \mathrm{minimax}(\mathrm{result}(s, a)) & \text{if player(}s\text{) = MIN}
\end{cases}
$$

- æœ€å¤§æœ€å°æœç´¢çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(b^m)$ï¼Œç©ºé—´å¤æ‚åº¦ä¸º $O(bm)$

### Alpha-Beta å‰ªæ

- å¦‚æœæœç´¢æ ‘æå¤§ï¼Œåˆ™æœ€å¤§æœ€å°æœç´¢çš„å¼€é”€å·¨å¤§ï¼Œæ— æ³•åœ¨åˆç†æ—¶é—´å†…è¿”å›ç»“æœ
- Alpha-Beta å‰ªæç®—æ³•çš„æ€æƒ³å¦‚ä¸‹ï¼š

    $$
    \begin{align*}
    \mathrm{minimax}(s_0) &= \max(\min(3, 9, 10), \min(2, x, y), \min(10, 5, 1))\\
    &= \max(3, \min(2, x, y), 1)
    \end{align*}
    $$

    - ä¸Šå¼ä¸­ $\min(2, x, y)$ è‚¯å®šå°äº 2ï¼Œè€Œå¤–é¢ä¸€å±‚æ±‚æœ€å¤§å€¼åˆæœ‰ 3 æ¯”å®ƒå¤§
    - æ‰€ä»¥å°±æ²¡æœ‰å¿…è¦å»æœç´¢ $x, y$ å¯¹åº”çš„å­æ ‘å¾—åˆ°å…·ä½“çš„ $x, y$ å€¼ï¼Œå¯ä»¥å°†è¿™ä¸¤ä¸ªåŠ¨ä½œå‰ªææ‰

## è’™ç‰¹å¡æ´›æ ‘æœç´¢

- å››ä¸ªæ­¥éª¤
    - é€‰æ‹©ï¼ˆselectionï¼‰ï¼šç®—æ³•ä»æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œå‘ä¸‹é€’å½’é€‰æ‹©å­èŠ‚ç‚¹ç›´åˆ°åˆ°è¾¾å¶å­ç»“ç‚¹æˆ–è€…åˆ°è¾¾è¿˜å…·æœ‰æœªè¢«æ‰©å±•çš„å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ Lï¼Œå‘ä¸‹é€’å½’é€‰æ‹©çš„è¿‡ç¨‹å¯ç”± UCB1 ç®—æ³•æ¥å®ç°ï¼Œåœ¨é€’å½’é€‰æ‹©è¿‡ç¨‹ä¸­è®°å½•ä¸‹æ¯ä¸ªèŠ‚ç‚¹è¢«é€‰æ‹©çš„æ¬¡æ•°å’Œæ¯ä¸ªèŠ‚ç‚¹å¾—åˆ°çš„å¥–åŠ±å‡å€¼
    - æ‰©å±•ï¼ˆexpansionï¼‰ï¼šå¦‚æœèŠ‚ç‚¹ L è¿˜ä¸æ˜¯ä¸€ä¸ªç»ˆæ­¢èŠ‚ç‚¹ï¼Œåˆ™éšæœºæ‰©å±•å®ƒçš„ä¸€ä¸ªæœªè¢«æ‰©å±•è¿‡çš„åç»§è¾¹ç¼˜èŠ‚ç‚¹ M
    - æ¨¡æ‹Ÿï¼ˆsimulationï¼‰ï¼šä»èŠ‚ç‚¹ M å‡ºå‘ï¼Œæ¨¡æ‹Ÿæ‰©å±•æœç´¢æ ‘ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªç»ˆæ­¢èŠ‚ç‚¹
    - åå‘ä¼ æ’­ï¼ˆback propagationï¼‰ï¼šç”¨æ¨¡æ‹Ÿæ‰€å¾—ç»“æœå›æº¯æ›´æ–°æ¨¡æ‹Ÿè·¯å¾„ä¸­ M åŠä»¥ä¸ŠèŠ‚ç‚¹çš„å¥–åŠ±å‡å€¼å’Œè¢«è®¿é—®æ¬¡æ•°

??? note "ä»£ç "
    ```python
    class AIPlayer:
        def **init**(self, color, C=1.2, iterations=100):
            self.player = color
            self.C = C
            self.iterations = iterations

        def game_over(self, board):
            # æ ¹æ®å½“å‰æ£‹ç›˜ï¼Œåˆ¤æ–­æ£‹å±€æ˜¯å¦ç»ˆæ­¢
            # å¦‚æœå½“å‰é€‰æ‰‹æ²¡æœ‰åˆæ³•ä¸‹æ£‹çš„ä½å­ï¼Œåˆ™åˆ‡æ¢é€‰æ‰‹ï¼›å¦‚æœå¦å¤–ä¸€ä¸ªé€‰æ‰‹ä¹Ÿæ²¡æœ‰åˆæ³•çš„ä¸‹æ£‹ä½ç½®ï¼Œåˆ™æ¯”èµ›åœæ­¢ã€‚
            b_list = list(board.get_legal_actions('X'))
            w_list = list(board.get_legal_actions('O'))
            is_over = len(b_list) == 0 and len(w_list) == 0  # è¿”å›å€¼ True/False
            return is_over

        def uct_search(self, root, iterations):
            for i in range(iterations):
                node = self.select(root)
                reward = self.simulate(node)
                self.backpropagate(node, reward)
            return self.ucb(root, 0).action

        def select(self, node):
            while not self.game_over(node.board):
                if len(node.children) == 0 or not node.finished():
                    return self.expand(node)
                else:
                    node = self.ucb(node, self.C)
            return node
        
        def expand(self, node):
            actions = list(node.board.get_legal_actions(node.player))
            if len(actions) == 0:
                return node.parent
            visited = [child.action for child in node.children]
            actions = [action for action in actions if action not in visited]
            action = random.choice(actions)
            new_board = deepcopy(node.board)
            new_board._move(action, node.player)
            node.expend(new_board, action, 'X' if node.player == 'O' else 'O')
            return node.children[-1]
        
        def ucb(self, node, C):
            max_ucb = -float('inf')
            max_children = []
            for child in node.children:
                ucb = child.reward / child.cnt + C * math.sqrt(2 * math.log(node.cnt) / child.cnt)
                if ucb > max_ucb:
                    max_ucb = ucb
                    max_children = [child]
                elif ucb == max_ucb:
                    max_children.append(child)
            if len(max_children) == 0:
                return node.parent
            return random.choice(max_children)
        
        def simulate(self, node):
            board = deepcopy(node.board)
            player = node.player
            while not self.game_over(board):
                actions = list(board.get_legal_actions(player))
                if not len(actions) == 0:
                    action = random.choice(actions)
                    board._move(action, player)
                player = 'X' if player == 'O' else 'O'
            return self.evaluate(board)
        
        def evaluate(self, board: Board):
            winner, diff = board.get_winner()
            if winner == 2:
                return 0
            winner = 'X' if winner == 0 else 'O'
            if winner == self.player:
                return 10 + diff
            else:
                return -10 - diff

        def backpropagate(self, node: TreeNode, reward):
            while node:
                node.cnt += 1
                if node.player == self.player:
                    node.reward -= reward
                else:
                    node.reward += reward
                node = node.parent

        def get_move(self, board):
            if self.player == 'X':
                player_name = 'é»‘æ£‹'
            else:
                player_name = 'ç™½æ£‹'
            print("è¯·ç­‰ä¸€ä¼šï¼Œå¯¹æ–¹ {}-{} æ­£åœ¨æ€è€ƒä¸­...".format(player_name, self.player))
            root = TreeNode(deepcopy(board), None, None, self.player)
            action = self.uct_search(root, self.iterations)
            return action
    ```
